---
title: mysql查询结果添加行号
number: 26
url: https://github.com/byronlau/Knowledge-Garden/discussions/26
date: 2023-11-01
createdAt: 2023-11-01T09:59:47Z
lastEditedAt: None
updatedAt: 2023-11-01T09:59:48Z
authors: [byronlau]
categories: 
  - DB
labels: []
filename: mysql查询结果添加行号.md
---

<p><ne-clipboard data="%7B%22type%22%3A%22fragment%22%2C%22name%22%3A%22%23fragment%22%2C%22children%22%3A%5B%7B%22type%22%3A%22element%22%2C%22id%22%3A%22tGtL6%22%2C%22name%22%3A%22h3%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22uf6e7ed88%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E4%B8%80.%20%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%8F%B7%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22O6sU7%22%2C%22name%22%3A%22h4%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22ude3db5b3%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E6%96%B9%E6%B3%951%EF%BC%9A%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u777da1b1%22%2C%22name%22%3A%22hole%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22card%22%2C%22id%22%3A%22hK68V%22%2C%22name%22%3A%22codeblock%22%2C%22attrs%22%3A%7B%22value%22%3A%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22Select%20(%40i%3A%3D%40i%2B1)%20as%20RowNum%2C%20A.*%20from%20Table1%20A%2C(Select%20%40i%3A%3D0)%20B%20order%20by%20a.id%20desc%20limit%200%2C%2010%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%7D%2C%22cardType%22%3A%22block%22%7D%2C%22cardType%22%3A%22block%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22w0Ooq%22%2C%22name%22%3A%22h4%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u55af145d%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E6%96%B9%E6%B3%952%EF%BC%9A%20%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u414f1234%22%2C%22name%22%3A%22hole%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22card%22%2C%22id%22%3A%22QAyU6%22%2C%22name%22%3A%22codeblock%22%2C%22attrs%22%3A%7B%22value%22%3A%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22Set%20%40i%3A%3D0%3B%5CnSelect%20(%40i%3A%3D%40i%2B1)%20as%20RowNum%2C%20A.*%20from%20Table1%20A%20order%20by%20a.id%20desc%20limit%200%2C10%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%7D%2C%22cardType%22%3A%22block%22%7D%2C%22cardType%22%3A%22block%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22PVStX%22%2C%22name%22%3A%22h4%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u15f8d250%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E4%BB%A5%E4%B8%8BSQL%E5%8F%AF%E5%9C%A8%E5%88%86%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8%EF%BC%9A%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u656397b4%22%2C%22name%22%3A%22hole%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22card%22%2C%22id%22%3A%22qGfXF%22%2C%22name%22%3A%22codeblock%22%2C%22attrs%22%3A%7B%22value%22%3A%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22set%20%40i%3A%3D10%3B%20select%20(%40i%3A%3D%40i%2B1)%20as%20RowNum%2C%20A.*%20from%20Table1%20A%20order%20by%20a.id%20desc%20limit%2010%2C5%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%7D%2C%22cardType%22%3A%22block%22%7D%2C%22cardType%22%3A%22block%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u87b61cbe%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22ua866900e%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E4%BB%8E%E7%AC%AC10%E6%9D%A1%E5%BC%80%E5%A7%8B%EF%BC%8C%E5%8F%965%E6%9D%A1%EF%BC%88%E6%AF%8F%E9%A1%B55%E8%A1%8C%E6%95%B0%E6%8D%AE%EF%BC%89%E3%80%82%E5%BA%8F%E5%8F%B7%E4%B9%9F%E4%BB%8E10%E5%BC%80%E5%A7%8B%E3%80%82%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u1df557c5%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u5e7e4c0f%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u5f7e4410%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22uc61cc153%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E4%BB%A5%E4%B8%8A%E6%96%B9%E6%B3%95%E9%80%82%E5%90%88%E5%9C%A8%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%8F%B7RowNum%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%A6%81%E5%AF%B9%E5%A4%8D%E6%9D%82%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%88%96%E8%A7%86%E5%9B%BE%E6%B7%BB%E5%8A%A0RowNum%EF%BC%8C%E5%88%99%E9%9C%80%E5%85%88%E5%81%9A%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%88%86%E7%BB%84%E6%88%96%E6%8E%92%E5%BA%8F%E5%90%8E%EF%BC%89%E7%BB%93%E6%9E%9C%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E4%BD%9C%E4%B8%BA%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E8%A1%A8%EF%BC%8C%E5%86%8D%E6%B7%BB%E5%8A%A0%E8%A1%8C%E5%BA%8F%E5%8F%B7%E3%80%82(%E7%9C%8B%E4%BA%8C)%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22GJlZl%22%2C%22name%22%3A%22h3%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u99cc79e8%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E4%BA%8C.%20%E5%AF%B9%E8%A7%86%E5%9B%BE%E6%9F%A5%E8%AF%A2%E6%8E%92%E5%BA%8F%E5%B9%B6%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%8F%B7%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u2e0507c5%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u6d3834b2%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E6%B3%A8%E6%84%8F%EF%BC%9A%E5%A6%82%E6%9E%9C%E6%98%AF%E8%A7%86%E5%9B%BE%E6%88%96%E5%A4%8D%E6%9D%82%E7%9A%84%E5%8C%85%E5%90%AB%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84SQL%E6%9F%A5%E8%AF%A2%EF%BC%8C%E9%9C%80%E5%85%88%E5%AF%B9%E8%A7%86%E5%9B%BE%E6%88%96%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8E%92%E5%BA%8F%E5%90%8E%EF%BC%8C%E5%86%8D%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%81%9A%E4%B8%BA%E8%A1%A8A%20%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%8F%B7%E3%80%82%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u29599679%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u1b9641de%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E5%A6%82%EF%BC%9A%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u2d90f73e%22%2C%22name%22%3A%22hole%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22card%22%2C%22id%22%3A%22DRJ5y%22%2C%22name%22%3A%22codeblock%22%2C%22attrs%22%3A%7B%22value%22%3A%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22Set%20%40i%3A%3DX%3Bselect%20(%40i%3A%3D%40i%2B1)%20as%20RowNum%2C%20A.*%20from%20%5Cn%20%20(Select%20*%20%20from%20Table1%20T%20where%201%3D1%20order%20by%20T.id%20desc%20limit%20X%2C%20N)%20A%5Cn%E6%88%96%5CnSelect%20(%40i%3A%3D%40i%2B1)%20as%20RowNum%2C%20A.*%20from%20(Select%20%40i%3A%3DX)%20B%2C%5Cn%20%20(Select%20*%20%20from%20Table1%20T%20where%201%3D1%20order%20by%20T.id%20desc%20limit%20X%2C%20N)%20A%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%7D%2C%22cardType%22%3A%22block%22%7D%2C%22cardType%22%3A%22block%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u0735bb81%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22ud89ff838%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E9%80%82%E5%90%88%E5%AF%B9%E8%A1%A8%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%8F%B7%EF%BC%8C%E6%98%AF%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82%E5%86%8D%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E4%B8%AD%E5%B8%B8%E7%94%A8%E3%80%82%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22nqgwg%22%2C%22name%22%3A%22h3%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22ub14b2d29%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E4%B8%89.%20%E5%9C%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B8%A6%E5%8F%98%E9%87%8F%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22ua5259d6a%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u04ba3461%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E5%9C%A8.net%E7%A8%8B%E5%BA%8F%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B8%A6%E5%8F%98%E9%87%8F%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%90%8E%E9%9D%A2%E6%B7%BB%E5%8A%A0%E2%80%9CAllow%20User%20Variables%3DTrue%3B%E2%80%9D%E3%80%82%E8%BF%99%E6%A0%B7%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%EF%BC%8CSQL%E8%AF%AD%E5%8F%A5%E5%8F%82%E6%95%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%96%E3%80%82%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22uddc7f673%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22ue13b3623%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22%E5%90%A6%E5%88%99%E4%BC%9A%E6%8A%A5%E9%94%99%E2%80%9CFatal%20error%20encountered%20during%20command%20execution.%E2%80%9D%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22uaba33210%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22y3ZX1%22%2C%22name%22%3A%22h3%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22text%22%2C%22id%22%3A%22u53830b64%22%2C%22name%22%3A%22%23text%22%2C%22attrs%22%3A%7B%7D%2C%22data%22%3A%22PostgreSQL%E4%B8%AD%E7%9A%84%E8%A1%8C%E5%8F%B7%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22u89c88798%22%2C%22name%22%3A%22hole%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%7B%22type%22%3A%22card%22%2C%22id%22%3A%22c7XXd%22%2C%22name%22%3A%22codeblock%22%2C%22attrs%22%3A%7B%22value%22%3A%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22SELECT%5Cn%20ROW_NUMBER()%20over(ORDER%20bY%20id%20DESC%20)%20AS%20rowNum%2C%5Cn%20%20%20%20id%2C%5Cn%5Ctvulnerability%2C%5Cn%5Ctapplication%2C%5Cn%5Cttype%2C%5Cn%5Ctprotocol%2C%5Cn%5Ctapproval_status%2C%5Cn%5Ctupdate_time%20%5CnFROM%5Cn%5Ctplugin_manage%20a%20where%201%3D1%20%5Cn%20%20%20%20%3Cif%20test%3D%5C%22%20vulnerability%20!%3D%20null%5C%22%3E%5Cn%20%20%20%20%20%20%20%20and%20vulnerability%20like%20concat(&#39;%25&#39;%2C%23%7Bvulnerability%7D%2C&#39;%25&#39;)%5Cn%20%20%20%20%3C%2Fif%3E%5Cn%20%20%20%20%20%3Cif%20test%3D%5C%22%20application%20!%3D%20null%5C%22%3E%5Cn%20%20%20%20%20%20%20%20and%20application%20like%20concat(&#39;%25&#39;%2C%23%7Bapplication%7D%2C&#39;%25&#39;)%5Cn%20%20%20%20%3C%2Fif%3E%5Cn%20%20%20%20%20%3Cif%20test%3D%5C%22%20type%20!%3D%20null%5C%22%3E%5Cn%20%20%20%20%20%20%20%20and%20type%20like%20concat(&#39;%25&#39;%2C%23%7Btype%7D%2C&#39;%25&#39;)%5Cn%20%20%20%20%3C%2Fif%3E%5Cn%20%20%20%20%20%3Cif%20test%3D%5C%22%20protocol%20!%3D%20null%5C%22%3E%5Cn%20%20%20%20%20%20%20%20and%20protocol%20like%20concat(&#39;%25&#39;%2C%23%7Bprotocol%7D%2C&#39;%25&#39;)%5Cn%20%20%20%20%3C%2Fif%3E%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%7D%2C%22cardType%22%3A%22block%22%7D%2C%22cardType%22%3A%22block%22%7D%5D%7D%2C%7B%22type%22%3A%22element%22%2C%22id%22%3A%22uad85f693%22%2C%22name%22%3A%22p%22%2C%22attrs%22%3A%7B%7D%2C%22children%22%3A%5B%5D%7D%5D%2C%22attrs%22%3A%7B%7D%7D"></ne-clipboard></p><div class="lake-content" typography="classic"><h3 id="tGtL6" style="font-size: 20; line-height: 28px; margin: 16px 0 5px 0"><span class="ne-text">一. 如何添加序号的方法：</span></h3><h4 id="O6sU7" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text">方法1：</span></h4><pre data-language="sql" id="hK68V" class="ne-codeblock language-sql" style="border: 1px solid rgb(232, 232, 232); border-radius: 2px; background-color: rgb(249, 249, 249); padding: 16px; font-size: 13px; color: rgb(89, 89, 89);">Select&nbsp;(@i:=@i+1)&nbsp;as&nbsp;RowNum,&nbsp;A.*&nbsp;from&nbsp;Table1&nbsp;A,(Select&nbsp;@i:=0)&nbsp;B&nbsp;order&nbsp;by&nbsp;a.id&nbsp;desc&nbsp;limit&nbsp;0,&nbsp;10;</pre><h4 id="w0Ooq" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text">方法2： </span></h4><pre data-language="sql" id="QAyU6" class="ne-codeblock language-sql" style="border: 1px solid rgb(232, 232, 232); border-radius: 2px; background-color: rgb(249, 249, 249); padding: 16px; font-size: 13px; color: rgb(89, 89, 89);">Set&nbsp;@i:=0;

Select&nbsp;(@i:=@i+1)&nbsp;as&nbsp;RowNum,&nbsp;A.*&nbsp;from&nbsp;Table1&nbsp;A&nbsp;order&nbsp;by&nbsp;a.id&nbsp;desc&nbsp;limit&nbsp;0,10;</pre><h4 id="PVStX" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text">以下SQL可在分页中使用：</span></h4><pre data-language="sql" id="qGfXF" class="ne-codeblock language-sql" style="border: 1px solid rgb(232, 232, 232); border-radius: 2px; background-color: rgb(249, 249, 249); padding: 16px; font-size: 13px; color: rgb(89, 89, 89);">set&nbsp;@i:=10;&nbsp;select&nbsp;(@i:=@i+1)&nbsp;as&nbsp;RowNum,&nbsp;A.*&nbsp;from&nbsp;Table1&nbsp;A&nbsp;order&nbsp;by&nbsp;a.id&nbsp;desc&nbsp;limit&nbsp;10,5;</pre><p id="u87b61cbe" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">查询结果从第10条开始，取5条（每页5行数据）。序号也从10开始。</span></p><p id="u1df557c5" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text"></span></p><p id="u5f7e4410" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">以上方法适合在单表查询添加序号RowNum，如果要对复杂的查询或视图添加RowNum，则需先做查询（分组或排序后）结果，然后将查询结果作为子查询的表，再添加行序号。(看二)</span></p><h3 id="GJlZl" style="font-size: 20; line-height: 28px; margin: 16px 0 5px 0"><span class="ne-text">二. 对视图查询排序并添加序号</span></h3><p id="u2e0507c5" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">注意：如果是视图或复杂的包含子查询的SQL查询，需先对视图或复杂查询进行查询和排序后，再将查询结果做为表A 添加序号。</span></p><p id="u29599679" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">如：</span></p><pre data-language="sql" id="DRJ5y" class="ne-codeblock language-sql" style="border: 1px solid rgb(232, 232, 232); border-radius: 2px; background-color: rgb(249, 249, 249); padding: 16px; font-size: 13px; color: rgb(89, 89, 89);">Set&nbsp;@i:=X;select&nbsp;(@i:=@i+1)&nbsp;as&nbsp;RowNum,&nbsp;A.*&nbsp;from&nbsp;

&nbsp;&nbsp;(Select&nbsp;*&nbsp;&nbsp;from&nbsp;Table1&nbsp;T&nbsp;where&nbsp;1=1&nbsp;order&nbsp;by&nbsp;T.id&nbsp;desc&nbsp;limit&nbsp;X,&nbsp;N)&nbsp;A

或

Select&nbsp;(@i:=@i+1)&nbsp;as&nbsp;RowNum,&nbsp;A.*&nbsp;from&nbsp;(Select&nbsp;@i:=X)&nbsp;B,

&nbsp;&nbsp;(Select&nbsp;*&nbsp;&nbsp;from&nbsp;Table1&nbsp;T&nbsp;where&nbsp;1=1&nbsp;order&nbsp;by&nbsp;T.id&nbsp;desc&nbsp;limit&nbsp;X,&nbsp;N)&nbsp;A</pre><p id="u0735bb81" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">这种方式适合对表、视图和复杂查询结果添加序号，是通用的方式。再分页查询中常用。</span></p><h3 id="nqgwg" style="font-size: 20; line-height: 28px; margin: 16px 0 5px 0"><span class="ne-text">三. 在程序中使用带变量的SQL语句</span></h3><p id="ua5259d6a" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">在.net程序中使用带变量的SQL语句时，需要在数据库的连接字符串后面添加“Allow User Variables=True;”。这样就可以实现，SQL语句参数自定义化。</span></p><p id="uddc7f673" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><span class="ne-text">否则会报错“Fatal error encountered during command execution.”</span></p><h3 id="y3ZX1" style="font-size: 20; line-height: 28px; margin: 16px 0 5px 0"><span class="ne-text">PostgreSQL中的行号</span></h3><pre data-language="sql" id="c7XXd" class="ne-codeblock language-sql" style="border: 1px solid rgb(232, 232, 232); border-radius: 2px; background-color: rgb(249, 249, 249); padding: 16px; font-size: 13px; color: rgb(89, 89, 89);">SELECT

&nbsp;ROW_NUMBER()&nbsp;over(ORDER&nbsp;bY&nbsp;id&nbsp;DESC&nbsp;)&nbsp;AS&nbsp;rowNum,

&nbsp;&nbsp;&nbsp;&nbsp;id,

	vulnerability,

	application,

	type,

	protocol,

	approval_status,

	update_time&nbsp;

FROM

	plugin_manage&nbsp;a&nbsp;where&nbsp;1=1&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;&nbsp;vulnerability&nbsp;!=&nbsp;null&quot;&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;vulnerability&nbsp;like&nbsp;concat(&#39;%&#39;,#{vulnerability},&#39;%&#39;)

&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;&nbsp;application&nbsp;!=&nbsp;null&quot;&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;application&nbsp;like&nbsp;concat(&#39;%&#39;,#{application},&#39;%&#39;)

&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;&nbsp;type&nbsp;!=&nbsp;null&quot;&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;type&nbsp;like&nbsp;concat(&#39;%&#39;,#{type},&#39;%&#39;)

&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;if&nbsp;test=&quot;&nbsp;protocol&nbsp;!=&nbsp;null&quot;&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;protocol&nbsp;like&nbsp;concat(&#39;%&#39;,#{protocol},&#39;%&#39;)

&nbsp;&nbsp;&nbsp;&nbsp;&lt;/if&gt;</pre><p id="uad85f693" class="ne-p" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; min-height: 24px;"><br/></p></div>
<script src="https://giscus.app/client.js"
    data-repo="byronlau/Knowledge-Garden"
    data-repo-id="R_kgDOKkfaDQ"
    data-mapping="number"
    data-term="26"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
</script>
        